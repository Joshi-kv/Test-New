<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Happy Birthday üéâ</title>
<style>
  /* ====== Mobile-first styles ====== */
  :root{
    --bg1:#ffdde1;
    --bg2:#ee9ca7;
    --accent:#ff6b81;
    --accent-2:#ff9a9e;
    --card:#ffffffee;
    --glass: rgba(255,255,255,0.12);
    --text: #2b2b2b;
    --muted: #5b5b5b;
    --radius: 18px;
    --safe-top: env(safe-area-inset-top);
  }
  html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
  body{
    display:flex;
    align-items:flex-start;
    justify-content:center;
    padding:calc(16px + var(--safe-top)) 16px 24px;
    background: linear-gradient(160deg,var(--bg1), var(--bg2));
    -webkit-font-smoothing:antialiased;
    color:var(--text);
    overflow:hidden;
  }

  /* Container card */
  .card{
    width:100%;
    max-width:420px;
    background: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.78));
    border-radius: var(--radius);
    box-shadow: 0 12px 30px rgba(0,0,0,0.18);
    padding:20px;
    position:relative;
    overflow:visible;
    border: 1px solid rgba(255,255,255,0.25);
    transform-origin:center;
  }

  /* Top ribbon */
  .ribbon{
    display:flex;
    align-items:center;
    gap:12px;
  }
  .avatar{
    width:64px;height:64px;border-radius:14px;background:linear-gradient(135deg,var(--accent),var(--accent-2));
    display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:26px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    flex-shrink:0;
  }
  .meta{
    flex:1;
  }
  .meta h1{margin:0;font-size:18px;line-height:1;}
  .meta p{margin:4px 0 0;font-size:13px;color:var(--muted);}

  /* Main visual/greeting */
  .greet{
    margin-top:16px;
    display:flex;
    gap:12px;
    align-items:center;
  }
  .hero{
    flex:1;
    min-height:150px;
    display:flex;
    align-items:center;
    justify-content:center;
    border-radius:12px;
    background: linear-gradient(120deg, rgba(255,255,255,0.35), rgba(255,255,255,0.18));
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
    position:relative;
    overflow:hidden;
    padding:16px;
  }
  .hero .big{
    font-size:22px;
    font-weight:700;
    text-align:center;
    line-height:1.05;
  }
  .sub{
    margin-top:10px;
    font-size:14px;
    color:var(--muted);
    text-align:center;
  }

  /* Typing effect */
  .typed{
    display:inline-block;
    border-right: 2px solid rgba(0,0,0,0.08);
    padding-right:6px;
    animation: blink 1s steps(2, start) infinite;
  }
  @keyframes blink{50%{border-color:transparent}}

  /* Button */
  .actions{
    display:flex;
    gap:12px;
    margin-top:16px;
    justify-content:center;
  }
  .btn{
    background:linear-gradient(90deg,var(--accent),var(--accent-2));
    color:white;
    border:none;
    padding:12px 18px;
    border-radius:12px;
    font-weight:600;
    font-size:16px;
    box-shadow: 0 10px 24px rgba(255,107,129,0.2);
    transform-origin:center;
    cursor:pointer;
    transition: transform .18s ease, box-shadow .18s ease;
  }
  .btn:active{transform:translateY(2px) scale(.995)}
  .btn.pulse{
    animation: pulse 2.2s infinite;
  }
  @keyframes pulse{
    0%{transform:scale(1); box-shadow:0 10px 24px rgba(255,107,129,0.18)}
    50%{transform:scale(1.03); box-shadow:0 20px 40px rgba(255,107,129,0.12)}
    100%{transform:scale(1); box-shadow:0 10px 24px rgba(255,107,129,0.18)}
  }

  /* Floating hearts container */
  .hearts{position:fixed; inset:0; pointer-events:none; z-index:0;}

  /* Modal (surprise) */
  .modal-backdrop{
    position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
    background:rgba(16,16,16,0.45); z-index:60; padding:20px; backdrop-filter: blur(4px);
    animation: fadeIn .18s ease;
  }
  @keyframes fadeIn{from{opacity:0} to{opacity:1}}
  .modal{
    width:100%; max-width:480px; border-radius:16px; overflow:hidden; background:linear-gradient(180deg,#fff,#fff);
    box-shadow:0 18px 40px rgba(0,0,0,0.32); position:relative;
  }
  .modal .slides{display:flex;transition:transform .45s cubic-bezier(.2,.9,.25,1)}
  .slide{min-width:100%; padding:18px; box-sizing:border-box; text-align:center;}
  .slide img{width:100%; border-radius:12px; max-height:360px; object-fit:cover; display:block; margin:auto;}
  .modal .close{position:absolute; top:10px; right:10px; background:transparent; border:none; font-size:20px; cursor:pointer;}
  .dots{display:flex; gap:6px; justify-content:center; padding:12px;}
  .dot{width:8px;height:8px;border-radius:999px;background:#ddd;}
  .dot.active{background:var(--accent); transform:scale(1.2);}

  /* small footer note */
  .note{font-size:12px;color:var(--muted);text-align:center;margin-top:12px;}

  /* Larger screens adapt */
  @media(min-width:720px){
    body{padding:40px;}
    .card{transform:scale(1.0)}
    .hero .big{font-size:28px;}
  }

  /* ====== Confetti canvas sits above modal background but below modal content ====== */
  #confettiCanvas{position:fixed; inset:0; z-index:65; pointer-events:none; display:none;}

</style>
</head>
<body>

  <!-- floating decorative hearts -->
  <div class="hearts" aria-hidden="true"></div>

  <!-- main card -->
  <main class="card" role="main">
    <div class="ribbon">
      <div class="avatar" id="avatar">üíñ</div>
      <div class="meta">
        <h1 id="title">Happy Birthday, <span id="name">Her Name</span>!</h1>
        <p id="subtitle">Swipe, tap & enjoy ‚Äî this little surprise is from me üíå</p>
      </div>
    </div>

    <div class="greet">
      <div class="hero" role="region" aria-label="Birthday greeting">
        <div>
          <div class="big">
            <span class="typed" id="typed"></span>
          </div>
          <div class="sub" id="subText">You make every day brighter ‚Äî and today is all about you.</div>
        </div>
      </div>
    </div>

    <div class="actions">
      <button class="btn pulse" id="surpriseBtn" aria-haspopup="dialog">Open Surprise üéÅ</button>
    </div>

    <div class="note">Tip: On mobile, rotate your phone for a wider image view.</div>
  </main>

  <!-- modal for surprise -->
  <div id="modalRoot" style="display:none;"></div>

  <!-- confetti canvas -->
  <canvas id="confettiCanvas"></canvas>

<script>
/* --------- Customize these variables (change text/colors/images) --------- */
const PERSON_NAME = "Anu";              // change to your girlfriend's name
const AVATAR_EMOJI = "üå∏";              // emoji to show in avatar
const MESSAGES = [
  "To the one who stole my heart...",
  "You are my smile on cloudy days.",
  "Thank you for being you. ‚ù§Ô∏è",
  "Happy Birthday, " + PERSON_NAME + "!"
];
const SLIDES = [
  // Add image URLs here or leave blank to use placeholders
  { src: '', caption: 'Memories we made together' },
  { src: '', caption: 'A tiny gallery of our moments' },
  { src: '', caption: 'Make a wish!' }
];
/* ---------------------------------------------------------------------- */

/* ========== small helpers ========== */
const el = id => document.getElementById(id);

/* set name and avatar */
document.getElementById('name').textContent = PERSON_NAME;
document.getElementById('avatar').textContent = AVATAR_EMOJI;

/* typing effect for messages */
(function typeLoop(){
  const target = el('typed');
  let msgIndex = 0, char = 0, forward = true;
  function step(){
    const txt = MESSAGES[msgIndex];
    if (forward){
      char++;
      if (char > txt.length){ forward = false; setTimeout(step, 900); return; }
    } else {
      char--;
      if (char === 0){ forward = true; msgIndex = (msgIndex+1)%MESSAGES.length; }
    }
    target.textContent = txt.slice(0,char);
    setTimeout(step, forward ? 80 : 30);
  }
  step();
})();

/* floating hearts generator */
(function hearts(){
  const container = document.querySelector('.hearts');
  const max = 10;
  const colors = ["#ff8fab","#ffc2c2","#ffd3e0","#ffa7b1","#ffd6f0"];
  function spawn(){
    const h = document.createElement('div');
    const size = Math.random()*28 + 14;
    h.style.width = h.style.height = size + 'px';
    h.style.position = 'absolute';
    h.style.left = Math.random()*100 + '%';
    h.style.top = '-10%';
    h.style.pointerEvents = 'none';
    h.style.background = colors[Math.floor(Math.random()*colors.length)];
    h.style.borderRadius = '6px 6px 10px 10px';
    h.style.transform = 'rotate(45deg) scale(1.0)';
    h.style.boxShadow = '0 6px 16px rgba(0,0,0,0.12)';
    h.style.opacity = 0.9;
    h.style.zIndex = 0;
    h.className = 'fheart';
    container.appendChild(h);

    const duration = 4200 + Math.random()*5000;
    const endX = (Math.random()*60 - 30);
    h.animate([
      { transform: 'translateY(0) rotate(45deg) scale(1)', opacity: 0.95 },
      { transform: `translateY(120vh) translateX(${endX}vw) rotate(45deg) scale(.9)`, opacity: 0.2 }
    ], { duration: duration, easing: 'cubic-bezier(.2,.9,.1,.99)'});
    setTimeout(()=> h.remove(), duration+50);
  }
  // spawn some immediately and then interval
  for(let i=0;i<6;i++) setTimeout(spawn, i*300);
  setInterval(spawn, 900);
})();

/* ====== Surprise modal with slides + confetti ====== */
const surpriseBtn = el('surpriseBtn');
const modalRoot = el('modalRoot');
const confettiCanvas = el('confettiCanvas');
const confettiCtx = confettiCanvas.getContext && confettiCanvas.getContext('2d');

function createModal(){
  modalRoot.style.display = 'block';
  modalRoot.innerHTML = `
    <div class="modal-backdrop" id="backdrop" role="dialog" aria-modal="true">
      <div class="modal" id="modalWindow">
        <button class="close" id="closeModal" aria-label="Close">&times;</button>
        <div class="slides" id="slides">
          ${SLIDES.map(s => `
            <div class="slide">
              ${s.src ? `<img src="${s.src}" alt="${s.caption}">` : `
                <div style="padding:28% 6%; border-radius:12px; background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:white; display:flex;align-items:center;justify-content:center; font-weight:700;">
                  ${s.caption}
                </div>
              `}
              <p style="margin-top:12px;color:var(--muted);font-size:14px">${s.caption}</p>
            </div>
          `).join('')}
        </div>
        <div class="dots" id="dots"></div>
        <div style="display:flex;gap:12px;justify-content:center;padding:12px;">
          <button class="btn" id="prev">Prev</button>
          <button class="btn" id="next">Next</button>
        </div>
      </div>
    </div>
  `;

  // dots
  const dots = modalRoot.querySelector('#dots');
  for(let i=0;i<SLIDES.length;i++){
    const d = document.createElement('div');
    d.className = 'dot' + (i===0? ' active':'');
    d.dataset.i = i;
    d.addEventListener('click',()=> gotoSlide(i));
    dots.appendChild(d);
  }

  // navigation
  const slides = modalRoot.querySelector('#slides');
  let index = 0;
  function update(){
    slides.style.transform = `translateX(-${index*100}%)`;
    Array.from(dots.children).forEach((dot,i)=> dot.classList.toggle('active', i===index));
  }
  function gotoSlide(i){
    index = Math.max(0, Math.min(SLIDES.length-1, i));
    update();
    if(index === SLIDES.length-1) startConfetti();
  }
  modalRoot.querySelector('#next').addEventListener('click', ()=> gotoSlide(index+1));
  modalRoot.querySelector('#prev').addEventListener('click', ()=> gotoSlide(index-1));
  modalRoot.querySelector('#closeModal').addEventListener('click', closeModal);
  modalRoot.querySelector('#backdrop').addEventListener('click', (e)=> {
    if(e.target.id === 'backdrop') closeModal();
  });

  // swipe support for mobile
  let touchStartX = null;
  slides.addEventListener('touchstart',(e)=> touchStartX = e.touches[0].clientX);
  slides.addEventListener('touchend',(e)=>{
    if(touchStartX === null) return;
    const diff = (e.changedTouches[0].clientX - touchStartX);
    if(diff < -40) gotoSlide(index+1);
    if(diff > 40) gotoSlide(index-1);
    touchStartX = null;
  });

  // set aria focus
  modalRoot.querySelector('#closeModal').focus();

  // show confetti if last
  function startConfetti(){ initConfetti(); }
  // initial check: if only one slide, trigger confetti
  if(SLIDES.length === 1) startConfetti();

  // expose gotoSlide to outside by attaching to modal element (for debug if needed)
  modalRoot._gotoSlide = gotoSlide;
}

function closeModal(){
  stopConfetti();
  modalRoot.style.display = 'none';
  modalRoot.innerHTML = '';
}

/* bind surprise button */
surpriseBtn.addEventListener('click', ()=>{
  createModal();
});

/* ======= Confetti (canvas) - lightweight implementation ======= */
let confettiParticles = [];
let confettiAnimId = null;
function resizeCanvas(){
  confettiCanvas.width = window.innerWidth;
  confettiCanvas.height = window.innerHeight;
}
function initConfetti(){
  if(!confettiCtx) return;
  confettiCanvas.style.display = 'block';
  resizeCanvas();
  confettiParticles = [];
  const count = Math.min(140, Math.floor((window.innerWidth*window.innerHeight)/9000));
  for(let i=0;i<count;i++){
    confettiParticles.push({
      x: Math.random()*confettiCanvas.width,
      y: Math.random()*confettiCanvas.height - confettiCanvas.height,
      vx: (Math.random()-0.5)*2.4,
      vy: 1 + Math.random()*3.6,
      size: 6 + Math.random()*10,
      color: ['#ff6b81','#ff9a9e','#ffd3e0','#fff176','#ffd54a'][Math.floor(Math.random()*5)],
      tilt: Math.random()*15,
      rot: Math.random()*360,
      rotSpeed: (Math.random()-0.5)*10
    });
  }
  if(confettiAnimId) cancelAnimationFrame(confettiAnimId);
  (function frame(){
    confettiAnimId = requestAnimationFrame(frame);
    confettiCtx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
    confettiParticles.forEach((p)=>{
      p.x += p.vx;
      p.y += p.vy;
      p.vy += 0.02; // gravity
      p.rot += p.rotSpeed;
      // draw rectangle rotated
      confettiCtx.save();
      confettiCtx.translate(p.x, p.y);
      confettiCtx.rotate(p.rot * Math.PI/180);
      confettiCtx.fillStyle = p.color;
      confettiCtx.fillRect(-p.size/2, -p.size/2, p.size, p.size*0.6);
      confettiCtx.restore();
    });
    // recycle particles that dropped
    confettiParticles = confettiParticles.filter(p => p.y < confettiCanvas.height + 60);
    if(confettiParticles.length === 0){
      stopConfetti();
    }
  })();
  // auto-stop after 6.5s to avoid infinite run
  setTimeout(()=>{ stopConfetti(); }, 6500);
  window.addEventListener('resize', resizeCanvas);
}
function stopConfetti(){
  if(confettiAnimId) cancelAnimationFrame(confettiAnimId);
  confettiAnimId = null;
  confettiParticles = [];
  confettiCanvas.style.display = 'none';
  confettiCtx && confettiCtx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
  try{ window.removeEventListener('resize', resizeCanvas); }catch(e){}
}

/* Accessibility: allow "Enter" on button */
surpriseBtn.addEventListener('keyup', (e)=>{ if(e.key === 'Enter') surpriseBtn.click(); });

/* Provide some keyboard controls: ESC to close modal if open */
document.addEventListener('keydown', (e)=> {
  if(e.key === 'Escape') closeModal();
});
</script>
</body>
</html>
